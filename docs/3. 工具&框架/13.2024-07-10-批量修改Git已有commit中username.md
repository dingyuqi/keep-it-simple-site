---\rtitle: 批量修改Git已有commit中username\rcreateTime: 2024/07/10 15:51:04\rtags:\r  - Git\rpermalink: /article/b07w665w/\r---\r之前很长一段时间GitHub上的提交都在使用工作账户, 导致私人仓库中的提交者比较混乱. 在StackOver里面找到了一个bash脚本可以批量修改username, 在这里记录一下.\r\r修改的步骤一共两步:\r1. 执行修改脚本\r2. 将本地修改同步到Git服务器\r\r## 1. 运行脚本\r首先我们来看脚本:\r```bash\r#!/bin/sh\r\rgit filter-branch -f --env-filter '\rOLD_EMAIL="your-old@email.com"\rCORRECT_NAME="correct-git-username"\rCORRECT_EMAIL="your-new@email.com"\rif [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]\rthen\r    export GIT_COMMITTER_NAME="$CORRECT_NAME"\r    export GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"\rfi\rif [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]\rthen\r    export GIT_AUTHOR_NAME="$CORRECT_NAME"\r    export GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"\rfi\r' --tag-name-filter cat -- --branches --tags\r```\r新建一个`rewrite.sh`文件, 将脚本中的`OLD_EMAIL`, `CORRECT_NAME`和`CORRECT_EMAIL`按照需要修改, 并将改脚本放到需要修改的项目的根目录下执行.\r```bash\rbash ./rewrite.sh\r```\r\r## 2. 同步Git log到服务器\r查看打印信息如果显示修改成功, 可以执行命令:\r```bash\rgit log\r```\r该命令可以查看已有commit信息的修改情况, 如果是正确的, 则执行`git push -f`即可将修改内容同步到Git服务器上.\r